<!DOCTYPE html><html>
        <head>
        <title>site-scrum-1</title>
        <meta charset="utf-8">
<meta property="head" content="H1">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700,900" rel="stylesheet">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/fonts/icomoon/style.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/bootstrap.min.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/magnific-popup.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/jquery-ui.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/owl.carousel.min.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/owl.theme.default.min.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/bootstrap-datepicker.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/fonts/flaticon/font/flaticon.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/aos.css">
        <link rel="stylesheet" href="./../cmsimde/static/chimper/css/style.css">
        <link rel="shortcut icon" href="./../cmsimde/static/favicons.png">
        
        <style type='text/css'>
            .site-section {
            background-color: #FFFF;
            padding: 40px 40px;
            }
            body > div > div.dropdown.open {
                display: block;
            }
        </style>
    
        <!-- <script src="./../cmsimde/static/jquery.js"></script> -->
        <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
        <script src="../cmsimde/static/chimper/js/jquery-3.3.1.min.js"></script>
        <link rel="stylesheet" href="./../cmsimde/static/tipuesearch/css/normalize.min.css">
        <script src="./../cmsimde/static/tipuesearch/tipuesearch_set.js"></script>
        <script src="tipuesearch_content.js"></script>
        <link rel="stylesheet" href="./../cmsimde/static/tipuesearch/css/tipuesearch.css">
        <script src="./../cmsimde/static/tipuesearch/tipuesearch.js"></script>
        <!-- for Wink3 客製化關閉 -->
        <!--
        <link rel="stylesheet" type="text/css" href="./../cmsimde/static/winkPlayer.css" />
        <script type="text/javascript" src="./../cmsimde/static/winkPlayer.js"></script>
        -->
        <script>
            /* original tipuesearch
            $(document).ready(function() {
                 $('#tipue_search_input').tipuesearch();
            });
            */
            // customed doSearch
            function doSearch() {
                $('#tipue_search_input').tipuesearch({
                    newWindow: true, 
                    minimumLength: 2,
                    wholeWords: false, // for search 中文
                });
            }
            $(document).ready(doSearch);
        </script>
        
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shCore.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushBash.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushDiff.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushJScript.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushJava.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushPython.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushSql.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushHaxe.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushXml.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushPhp.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushPowerShell.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushLua.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushCpp.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushCss.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushCSharp.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushDart.js"></script>
<script type="text/javascript" src="./../cmsimde/static/syntaxhighlighter/shBrushRust.js"></script>
<link type="text/css" rel="stylesheet" href="./../cmsimde/static/syntaxhighlighter/css/shCoreDefault.css"/>
<script type="text/javascript">SyntaxHighlighter.all();</script>
<!-- 暫時不用
<script src="./../cmsimde/static/fengari-web.js"></script>
<script type="text/javascript" src="./../cmsimde/static/Cango-13v08-min.js"></script>
<script type="text/javascript" src="./../cmsimde/static/CangoAxes-4v01-min.js"></script>
<script type="text/javascript" src="./../cmsimde/static/gearUtils-05.js"></script>
-->
<!-- for Brython 暫時不用
<script src="https://scrum-3.github.io/web/brython/brython.js"></script>
<script src="https://scrum-3.github.io/web/brython/brython_stdlib.js"></script>
-->
<style>
img.add_border {
    border: 3px solid blue;
}
</style>

</head>
<body>
<div class='container'><nav>
        
    <div class="site-wrap">

    <div class="site-mobile-menu">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close mt-3">
          <span class="icon-close2 js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div>
    
            <header class="site-navbar py-4 bg-white" role="banner">
              <div class="container">
                <div class="row align-items-center">
                <h1>site-scrum-1</h1>
                <div class="pl-4">
                    <form>
                    <input type="text" placeholder="Search" name="q" id="tipue_search_input" pattern=".{2,}" title="At least 2 characters" required>
                    </form>
                </div>
                  <!-- <div class="col-11 col-xl-2">
                    <h1 class="mb-0 site-logo"><a href="index.html" class="text-black h2 mb-0">site-scrum-1</a></h1> 
                  </div>
                  -->
                  <div class="col-12 col-md-10 d-none d-xl-block">
                    <nav class="site-navigation position-relative text-right" role="navigation">
    <ul class='site-menu js-clone-nav mr-auto d-none d-lg-block'>
                        <li class="active has-children"><a href="index.html">Home</a>
                        <ul class="dropdown">
                            <li><a href="sitemap.html">Site Map</a></li>
                            <li><a href="./../reveal/index.html">reveal</a></li>
                            <li><a href="./../blog/index.html">blog</a></li>
                        </ul>
                      </li>
                     <li><a href='About.html'>About</a><li><a href='Upload_image.html'>Upload_image</a><li><a href='resize before upload.html'>resize before upload</a><li><a href='Brython_Flask.html'>Brython_Flask</a></li>
                      </ul>
                </nav>
              </div>
              <div class="d-inline-block d-xl-none ml-md-0 mr-auto py-3" style="position: relative; top: 3px;"><a href="#" class="site-menu-toggle js-menu-toggle text-black"><span class="icon-menu h3"></span></a></div>
              </div>

            </div>
          </div>
          
        </header>
    <div id="tipue_search_content">Upload_image << <a href='Upload_image.html'>Previous</a> <a href='Brython_Flask.html'>Next</a> >> Brython_Flask<br /><h1>resize before upload</h1>
<p>改用 <a href="https://github.com/moxiecode/plupload">https://github.com/moxiecode/plupload</a></p>
<p style="padding-left: 30px;"><a href="https://github.com/scrum-1/plupload">https://github.com/scrum-1/plupload</a> </p>
<p>try to resize image before upload</p>
<p><a href="https://nicobadia-com.translate.goog/?_x_tr_sch=http&amp;_x_tr_sl=fr&amp;_x_tr_tl=en&amp;_x_tr_hl=fr">Blog (nicobadia-com.translate.goog)</a></p>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">/*!
 * jQuery AXuploader
 * Alban Xhaferllari
 * albanx@gmail.com
 * Copyright 2010, AUTHORS.txt (http://www.albanx.com)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * 
 */
// 2013.08.21 Yen modified Chrome file append error

(function($)
{
	var methods =
	{
		init : function(options)
		{

    	    return this.each(function() 
    	    {
    	        var settings = {
        	      'remotePath' : 'js/',
        	      'url':'phplibs/uploadfiles.php',
        	      'data':'',
        	      'async':true,
        	      'maxFiles':9999,
        	      'allowExt':['all'],
        	      'showSize':'Mb',
        	      'success':function(respTxt,fileName) {},
        	      'finish':function(respTxt,filesName) {},
        	      'error':function(e){},
        	      'GIFprogress':'',
        	      'enable':true,
        	      'chunkSize':1024*1024//default 1Mb
    	        };

				var _this=this;
				if(options)	$.extend(settings,options);
				var allowExt=settings.allowExt.join('|').toLowerCase();

/*================================================================================*\
				 Test if support pure ajax upload
				\*================================================================================*/
				var _browse = document.createElement('input');
				_browse.type = 'file'; 
				_browse.name='ax-files[]';
			    var isAjaxUpload=('multiple' in _browse &amp;&amp;  typeof File != "undefined" &amp;&amp;  typeof (new XMLHttpRequest()).upload != "undefined" );
			   // isAjaxUpload=false;

				/*================================================================================*\
				 helper variables
				\*================================================================================*/
			    var fileCount=0;//Number of selected files
			    var totalFiles=0;

				/*================================================================================*\
				 Form for classic upload
				\*================================================================================*/
			    var onLoadIframe=false;
			    var mainFrame=$('&lt;iframe src="javascript:false;" name="ax-main-frame" /&gt;').hide().appendTo(_this).load(function(){
			    	if(onLoadIframe)
			    	{
			    		fileCount=1;
			    		$(_this).find('.ax-progress-div').html('100%');
			    		onFinish(this.contentWindow.document.body.innerHTML,'',$(_this).find('.ax-upload'));
			    	}
				});

			    var mainForm=$('&lt;form target="ax-main-frame" method="POST" action="" encType="multipart/form-data" /&gt;').appendTo(_this);


				/*================================================================================*\
				 Browse input used for selecting files to upload. Cloned for normal upload
				\*================================================================================*/


			    var browse=$(_browse).attr('multiple',isAjaxUpload).appendTo(mainForm).bind('change',function(){
					if(isAjaxUpload)
					{
						for (var i = 0; i &lt; this.files.length; i++) 
						{
							if(fileCount&lt;=settings.maxFiles)
							{
								add_file(fileList,this.files[i],this.files[i].name,this.files[i].size,fileCount);
							}
						}
					}
					else
					{
						if(fileCount&lt;=settings.maxFiles)
						{
							add_file(fileList,this,this.value.replace(/^.*\\/, ''),0,fileCount);
						}
					}
				});

				/*================================================================================*\
				Upload All files button that upload files at once on click
				\*================================================================================*/
				var uploadAll=$('&lt;input style="margin-left:5px;" type="button" value="Upload all" class="ax-uploadall" /&gt;').attr('disabled',true).appendTo(mainForm).bind('click',function(){
					if(isAjaxUpload)
					{
						$(_this).find('.ax-upload:not(:disabled)').click();
					}
					else
					{
						onLoadIframe=true;
						var finalUrl=get_final_url('');
						mainForm.attr('action',finalUrl).submit();

						$(_this).find('.ax-upload').attr('disabled',true);
						if(settings.GIFprogress!='')
							$(_this).find('.ax-progress-div').html('&lt;img src="'+settings.GIFprogress+'" alt="uploading..." /&gt;');
						else
							$(_this).find('.ax-progress-div').html('Uploading...');
					}
				});

				/*================================================================================*\
				Clear buttons that resets file list and variables
				\*================================================================================*/
				var clear=$('&lt;input style="margin-left:5px;" type="button" value="Clear" class="ax-clear" /&gt;').appendTo(mainForm).bind('click',function(){
					fileCount=0;
					totalFiles=0;
					uploadAll.attr('disabled',fileCount==0);
					fileList.children('tbody').remove();
				});


				/*================================================================================*\
				Table with the list of files and their details
				\*================================================================================*/
			    var fileList=$('&lt;table class="ax-file-list" /&gt;').append('&lt;thead&gt;&lt;tr&gt;'+
													 	'&lt;th&gt;File&lt;/th&gt;'+
													 	'&lt;th&gt;Size&lt;/th&gt;'+
													 	'&lt;th&gt;Progress&lt;/th&gt;'+
													 	'&lt;th&gt;Remove&lt;/th&gt;'+
													 	'&lt;th&gt;Upload&lt;/th&gt;'+
													 '&lt;/tr&gt;&lt;/thead&gt;').appendTo(mainForm);


				/*================================================================================*\
				Functions that sets the url for sending additional data
				\*================================================================================*/
			    function get_final_url(enc_name)
			    {
					/*================================================================================*\
					 Encode remote path and calculate it if given as function
					\*================================================================================*/
					settings.remotePath=(typeof(settings.remotePath)=='function')?settings.remotePath():settings.remotePath;

					/*================================================================================*\
					 set other URL data
					\*================================================================================*/

					var c=(settings.url.indexOf('?')==-1)?'?':'&amp;';
					var url=settings.url+c+'ax-file-path='+encodeURIComponent(settings.remotePath)+'&amp;ax-allow-ext='+encodeURIComponent(allowExt);

					settings.data=(typeof(settings.data)=='function')?settings.data():settings.data;
					return url+'&amp;ax-file-name='+enc_name+'&amp;'+settings.data;//final url with other data
			    }

				/*================================================================================*\
				Functions that executes and the end of file uploading
				\*================================================================================*/
			    function onFinish(txt,currF,up,ab)
			    {
					fileCount--;//count upload files

					up.attr('disabled',false);
					settings.success(txt,currF);
					if(fileCount==0)
					{
						var filesArr=new Array();
						$(_this).find('.ax-file-name').each(function(){
							filesArr.push($(this).attr('title'));
						});
						fileCount=totalFiles;
						settings.finish(txt,filesArr);
						uploadAll.attr('disabled',false);
					}
			    }

				/*================================================================================*\
				Functions creates file form and xmlhttprequest for upload
				\*================================================================================*/
				function add_file(t,o,n,s,numF)
				{
					var ext=n.split('.').pop().toLowerCase();//file ext

					/*================================================================================*\
					File extension control
					\*================================================================================*/
					if(allowExt.indexOf(ext)&lt;0 &amp;&amp; allowExt!='all')	return;

					/*================================================================================*\
					Display file size in MB o Kb settings
					\*================================================================================*/
					switch(settings.showSize.toLowerCase())
					{
						case 'mb':s=s/(1024*1024);break;
						case 'kb':s=s/1024;break;
					}
					s=(Math.round(s*100)/100)+' '+settings.showSize;


					fileCount++;//update file number
					totalFiles++;

					uploadAll.attr('disabled',fileCount==0);
					//remove button action bind
					var rm=$('&lt;input type="button" value="Remove" /&gt;').bind('click',function(){
						fileCount--;
						totalFiles--;
						uploadAll.attr('disabled',fileCount==0);
						$(this).parents('tr:first').remove();
					});

					//prepare abort and upload button
					var up=$('&lt;input type="button" value="Upload" class="ax-upload" /&gt;').bind('click',function(){ this.disabled=true; });

					var tr=$('&lt;tr /&gt;').appendTo(t);
					var td_n=$('&lt;td class="ax-file-name" title="'+n+'" /&gt;').appendTo(tr).html(n);
					var td_s=$('&lt;td class="ax-size-td" /&gt;').appendTo(tr).html(s);
					var td_p=$('&lt;td class="ax-progress-td" /&gt;').appendTo(tr);
					var div_p=$('&lt;div  class="ax-progress-div" /&gt;').css({'width':'0%','background-color':'red'}).html(0).appendTo(td_p);
					var td_r=$('&lt;td class="ax-remove-td" /&gt;').appendTo(tr).append(rm);
					var td_u=$('&lt;td class="ax-upload-td" /&gt;').appendTo(tr).append(up);

					/*================================================================================*\
					 Prepare to send
					\*================================================================================*/
					var enc_name=encodeURIComponent(n);//encode file name

					if(!isAjaxUpload)
					{
						var file_holder=$('&lt;div /&gt;').appendTo(td_n).hide().append(o);						
						up.bind('click',function(){
							/*================================================================================*\
							 Target Iframe for async upload with iframes
							\*================================================================================*/
							var targetFrame=$('&lt;iframe src="javascript:false;" name="ax-frame-'+numF+'" /&gt;').hide().appendTo(td_n).load(function(){
								if($(this).attr('load')=='1')
								{
									div_p.html('Finish');
									onFinish(this.contentWindow.document.body.innerHTML,n,up);
								}
							}).attr('load','0');
							div_p.html('Uploading...');
							targetFrame.attr('load','1');

							var finalUrl=get_final_url(enc_name);

							$('&lt;form method="POST" action="'+finalUrl+'" encType="multipart/form-data" /&gt;').attr('target','ax-frame-'+numF).appendTo(td_n).hide().append(o).submit();
						});

						//clone browse file and append it to main form for selecting other files
						$(o).clone(true).val('').prependTo(mainForm);
					}
					else
					{
						/*================================================================================*\
						 bind actions to buttons
						\*================================================================================*/
						up.bind('click',function(){
							uploadFileXhr(o,0,$(this),div_p);
						});
					}
				}

				//recrusive file upload with chunk method
				function uploadFileXhr(o,start_byte,up,div_p)
				{
					var totals=o.size;
					var chunk;	
					var peice=settings.chunkSize;//bytes to upload at once

					var end_byte=start_byte+peice;
					var peice_count=end_byte/peice;
					var is_last=(totals-end_byte&lt;=0)?1:0;

					/*===============================================================*\
					 * Detect support slice method
					 * if slice is not supported then send all file at once
					\*==============================================================*/

//Initialize a new FileReader object
var reader = new FileReader();

//Slice the file into the desired chunk
var chunk = o.slice(start_byte, end_byte);
reader.readAsBinaryString(chunk);

/*================================================================================*\
					 Prepare xmlhttpreq object for file upload Bind functions and progress
					\*================================================================================*/
					var xhr = new XMLHttpRequest();//prepare xhr for upload

					xhr.onreadystatechange=function()
					{
						if(this.readyState == 4 &amp;&amp; this.status == 200)
						{
							if(is_last==0)
							{
								uploadFileXhr(o,end_byte,up,div_p);
							}
							else
							{
								onFinish(xhr.responseText,o.name,up);
								div_p.html('100%').css('width','100%');
							}
						}
					};
					xhr.upload.onprogress=function(e)
					{
						if (e.lengthComputable) 
						{
							var perc = Math.round((e.loaded+peice_count*peice-peice)*100/totals);
							div_p.html(perc+'%').css('width',perc+'%');
						}
					};

					xhr.upload.onerror=settings.error(xhr.responseText,o.name);
					var finalUrl=get_final_url(encodeURIComponent(o.name));
					xhr.open('POST',finalUrl+'&amp;start='+start_byte,settings.async);//url + async/sync
					xhr.setRequestHeader('Cache-Control', 'no-cache');
					xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');//header
                    // have to use json utf-8 charset
                    xhr.setRequestHeader("Content-Type", "application/json; charset=utf-8");
					xhr.send(chunk);//send request of file 
				}

				/*=======================================================
				 * Disable option
				 *======================================================*/
	    	    if(!settings.enable)
	    	    	$(this).find('input:not(:disabled), button:not(:disabled)').addClass('ax-disabled').attr('disabled',true);

    	    });
		},
		enable:function()
		{
			return this.each(function()
			{
				$(this).find('.ax-disabled').attr('disabled',false).removeClass('ax-disabled');
			});
		},
		disable:function()
		{
			return this.each(function()
			{
				$(this).find('input:not(:disabled), button:not(:disabled)').addClass('ax-disabled').attr('disabled',true);
			});
		},
		start:function()
		{
			$(this).find('.ax-uploadall:not(:disabled)').click();
		},
		clear:function()
		{
			(this).find('.ax-clear:not(:disabled)').click();
		},
		destroy : function()
		{
			return this.each(function()
			{
				var $this = $(this);
				$this.removeData('settings');
				$this.html('');
			});
		}
	};

	$.fn.axuploader = function(method, options)
	{
		if(methods[method])
		{
			return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
		}
		else if(typeof method === 'object' || !method)
		{
			return methods.init.apply(this, arguments);
		}
		else
		{
			$.error('Method ' + method + ' does not exist on jQuery.axuploader');
		}
	};

})(jQuery);
</pre>
<p></p>
<script src="./../downloads/pica.min.js"></script><br />Upload_image << <a href='Upload_image.html'>Previous</a> <a href='Brython_Flask.html'>Next</a> >> Brython_Flask</div>
        
    <!-- footer -->
      <div class="container">
        <div class="row pt-3 mx-auto">
            <p>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank" >Colorlib</a>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </p>
        </div>
      </div>
    <!-- for footer -->
    
        </div> <!-- for site wrap -->
            <!-- <script src="../cmsimde/static/chimper/js/jquery-3.3.1.min.js"></script> -->
            <script src="../cmsimde/static/chimper/js/jquery-migrate-3.0.1.min.js"></script>
            <script src="../cmsimde/static/chimper/js/jquery-ui.js"></script>
            <script src="../cmsimde/static/chimper/js/popper.min.js"></script>
            <script src="../cmsimde/static/chimper/js/bootstrap.min.js"></script>
            <script src="../cmsimde/static/chimper/js/owl.carousel.min.js"></script>
            <script src="../cmsimde/static/chimper/js/jquery.stellar.min.js"></script>
            <script src="../cmsimde/static/chimper/js/jquery.countdown.min.js"></script>
            <script src="../cmsimde/static/chimper/js/jquery.magnific-popup.min.js"></script>
            <script src="../cmsimde/static/chimper/js/bootstrap-datepicker.min.js"></script>
            <script src="../cmsimde/static/chimper/js/aos.js"></script>
            <!--
            <script src="../cmsimde/static/chimper/js/typed.js"></script>
                    <script>
                    var typed = new Typed('.typed-words', {
                    strings: ["Web Apps"," WordPress"," Mobile Apps"],
                    typeSpeed: 80,
                    backSpeed: 80,
                    backDelay: 4000,
                    startDelay: 1000,
                    loop: true,
                    showCursor: true
                    });
                    </script>
            -->
            <script src="../cmsimde/static/chimper/js/main.js"></script>
        
<!-- 啟用 LaTeX equations 編輯 -->
  <!-- <script>
  MathJax = {
    tex: {inlineMath: [['$', '$'], ['\(', '\)']]}
  };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>-->
    </body></html>
        